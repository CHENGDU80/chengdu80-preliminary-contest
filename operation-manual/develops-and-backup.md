# 快照备份

**创建快照：**

本次比赛为防止选手操作时出现错误导致机器故障，可以在操作前在控制台上对所属小组EC2虚拟机做快照备份。

首先在操作未确定动作之前，进入控制台EC2实例界面点击根设备进入磁盘。

![&#x627E;&#x5230;&#x4E3B;&#x673A;&#x6839;&#x5377;](../.gitbook/assets/image%20%2812%29.png)

右键磁盘，弹出选择框，选择**创建快照。**

创建快照界面，在描述中可以加入主机名+日期作为标记，方便后续恢复，注意描述不能有中文和括号，标签可添加中文方便记忆。

![&#x521B;&#x5EFA;&#x5FEB;&#x7167;&#x754C;&#x9762;](../.gitbook/assets/image%20%2811%29.png)

创建确定后，通过弹出的snap-XXX的link可以找到正在创建的快照，黄色字样的pengding是正在创建转换，等待快照变为绿色字样的completed 即创建好了快照。

![&#x6B63;&#x5728;&#x521B;&#x5EFA;&#x5FEB;&#x7167;](../.gitbook/assets/image%20%2826%29.png)

当实例因使用不当，需要恢复成快照时的状态，我们先关闭实例通过之前找根卷的方法找到根卷所在位置，右键磁盘，点击**断开卷,**断开后卷的状态是available。

![&#x65AD;&#x5F00;&#x5377;&#x540E;&#x78C1;&#x76D8;&#x72B6;&#x6001;](../.gitbook/assets/image%20%2820%29.png)

在刚刚创建的快照页面（可通过ec2界面左侧快照栏搜索快照ID查找），右键**创建卷**（请注意：创建的卷必须是和你的实例在相同可用区才能进行挂载步骤）。创建完成的卷，右键**连接卷**，将根卷位置**/dev/sda1**填入开机即可。

![&#x8FDE;&#x63A5;&#x5377;&#x754C;&#x9762;](../.gitbook/assets/image%20%2827%29.png)

注：AMI为AWS提供的自制镜像服务，由于创建AMI恢复会涉及到新建EC2虚拟机，本次由于官方限制参赛组只有1台ec2虚拟机，所有不涉及AMI，[AMI操作详情见官网](https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/ebs-creating-snapshot.html)。



